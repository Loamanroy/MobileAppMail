{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/callSuper","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"378KbBHdmndC3iMXZ2Ix8oB3LeE=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/superPropGet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"b4Lel0pEiTM8mvZZX/d05uR+OmU=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/inherits","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"y0uNg4LxF1CLscQChxzgo5dfjvA=","exportNames":["*"],"imports":1}},{"name":"domhandler","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":9,"column":20,"index":173}}],"key":"KYhnx5+o028X5IFQh7qGm6XZdSU=","exportNames":["*"],"imports":1}},{"name":"./dom-utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":174},"end":{"line":10,"column":54,"index":228}}],"key":"Sqx/dBI2FHOKFor/gbTZVg8zI7c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return DomHandler;\n    }\n  });\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _babelRuntimeHelpersCallSuper = require(_dependencyMap[2], \"@babel/runtime/helpers/callSuper\");\n  var _callSuper = _interopDefault(_babelRuntimeHelpersCallSuper);\n  var _babelRuntimeHelpersSuperPropGet = require(_dependencyMap[3], \"@babel/runtime/helpers/superPropGet\");\n  var _superPropGet = _interopDefault(_babelRuntimeHelpersSuperPropGet);\n  var _babelRuntimeHelpersInherits = require(_dependencyMap[4], \"@babel/runtime/helpers/inherits\");\n  var _inherits = _interopDefault(_babelRuntimeHelpersInherits);\n  var _domhandler = require(_dependencyMap[5], \"domhandler\");\n  var _domUtils = require(_dependencyMap[6], \"./dom-utils\");\n  /**\n   * A record of callback to visit the DOM.\n   *\n   * @public\n   */\n  var DomHandler = /*#__PURE__*/function (_OriginalDomHandler) {\n    function DomHandler(options) {\n      var _this;\n      (0, _classCallCheck.default)(this, DomHandler);\n      _this = (0, _callSuper.default)(this, DomHandler, [undefined, options, undefined]);\n      _this.ignoredTagsCount = -1;\n      var ignoredTags = {};\n      for (var tag of options.ignoredTags || []) {\n        ignoredTags[tag] = true;\n      }\n      _this.ignoredTags = ignoredTags;\n      _this.visitors = options.visitors || {};\n      var isIgnored = _this.isIgnored.bind(_this);\n      if (options.ignoreNode) {\n        _this.isIgnored = node => {\n          return isIgnored(node) || options.ignoreNode(node, _this.tagStack[_this.tagStack.length - 1]);\n        };\n      }\n      return _this;\n    }\n    (0, _inherits.default)(DomHandler, _OriginalDomHandler);\n    return (0, _createClass.default)(DomHandler, [{\n      key: \"isIgnored\",\n      value: function isIgnored(node) {\n        return this.ignoredTags[node.name] || this.ignoredTagsCount > -1;\n      }\n    }, {\n      key: \"addNode\",\n      value: function addNode(node) {\n        if (this.isIgnored(node) === true) {\n          // increment only for elements.\n          if ((0, _domUtils.isDomElement)(node)) {\n            this.ignoredTagsCount++;\n          }\n        } else {\n          (0, _superPropGet.default)(DomHandler, \"addNode\", this, 3)([node]);\n          if ((0, _domUtils.isDomText)(node)) {\n            this.visitors.onText?.(node);\n          }\n        }\n      }\n    }, {\n      key: \"ontext\",\n      value: function ontext(text) {\n        // Only include text when out of an\n        // ignoring session.\n        if (this.ignoredTagsCount < 0) {\n          (0, _superPropGet.default)(DomHandler, \"ontext\", this, 3)([text]);\n        }\n      }\n    }, {\n      key: \"onopentag\",\n      value: function onopentag(name, attribs) {\n        (0, _superPropGet.default)(DomHandler, \"onopentag\", this, 3)([name, attribs]);\n      }\n    }, {\n      key: \"onclosetag\",\n      value: function onclosetag() {\n        // Call onElement on close to give access to this node children\n        this.visitors.onElement?.(this.tagStack[this.tagStack.length - 1]);\n        (0, _superPropGet.default)(DomHandler, \"onclosetag\", this, 3)([]);\n        if (this.ignoredTagsCount > -1) {\n          this.ignoredTagsCount--;\n        }\n      }\n    }, {\n      key: \"onend\",\n      value: function onend() {\n        this.visitors.onDocument?.(this.root);\n      }\n    }]);\n  }(_domhandler.DomHandler);\n});","lineCount":107,"map":[[15,13,48,21,"DomHandler"],[15,23,48,31],[16,4,48,31],[17,2,48,31],[18,2,48,31],[18,6,48,31,"_babelRuntimeHelpersClassCallCheck"],[18,40,48,31],[18,43,48,31,"require"],[18,50,48,31],[18,51,48,31,"_dependencyMap"],[18,65,48,31],[19,2,48,31],[19,6,48,31,"_classCallCheck"],[19,21,48,31],[19,24,48,31,"_interopDefault"],[19,39,48,31],[19,40,48,31,"_babelRuntimeHelpersClassCallCheck"],[19,74,48,31],[20,2,48,31],[20,6,48,31,"_babelRuntimeHelpersCreateClass"],[20,37,48,31],[20,40,48,31,"require"],[20,47,48,31],[20,48,48,31,"_dependencyMap"],[20,62,48,31],[21,2,48,31],[21,6,48,31,"_createClass"],[21,18,48,31],[21,21,48,31,"_interopDefault"],[21,36,48,31],[21,37,48,31,"_babelRuntimeHelpersCreateClass"],[21,68,48,31],[22,2,48,31],[22,6,48,31,"_babelRuntimeHelpersCallSuper"],[22,35,48,31],[22,38,48,31,"require"],[22,45,48,31],[22,46,48,31,"_dependencyMap"],[22,60,48,31],[23,2,48,31],[23,6,48,31,"_callSuper"],[23,16,48,31],[23,19,48,31,"_interopDefault"],[23,34,48,31],[23,35,48,31,"_babelRuntimeHelpersCallSuper"],[23,64,48,31],[24,2,48,31],[24,6,48,31,"_babelRuntimeHelpersSuperPropGet"],[24,38,48,31],[24,41,48,31,"require"],[24,48,48,31],[24,49,48,31,"_dependencyMap"],[24,63,48,31],[25,2,48,31],[25,6,48,31,"_superPropGet"],[25,19,48,31],[25,22,48,31,"_interopDefault"],[25,37,48,31],[25,38,48,31,"_babelRuntimeHelpersSuperPropGet"],[25,70,48,31],[26,2,48,31],[26,6,48,31,"_babelRuntimeHelpersInherits"],[26,34,48,31],[26,37,48,31,"require"],[26,44,48,31],[26,45,48,31,"_dependencyMap"],[26,59,48,31],[27,2,48,31],[27,6,48,31,"_inherits"],[27,15,48,31],[27,18,48,31,"_interopDefault"],[27,33,48,31],[27,34,48,31,"_babelRuntimeHelpersInherits"],[27,62,48,31],[28,2,1,0],[28,6,1,0,"_domhandler"],[28,17,1,0],[28,20,1,0,"require"],[28,27,1,0],[28,28,1,0,"_dependencyMap"],[28,42,1,0],[29,2,10,0],[29,6,10,0,"_domUtils"],[29,15,10,0],[29,18,10,0,"require"],[29,25,10,0],[29,26,10,0,"_dependencyMap"],[29,40,10,0],[30,2,12,0],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[35,2,12,0],[35,6,48,21,"DomHandler"],[35,16,48,31],[35,42,48,31,"_OriginalDomHandler"],[35,61,48,31],[36,4,53,2],[36,13,53,2,"DomHandler"],[36,24,53,14,"options"],[36,31,53,40],[36,33,53,42],[37,6,53,42],[37,10,53,42,"_this"],[37,15,53,42],[38,6,53,42],[38,10,53,42,"_classCallCheck"],[38,25,53,42],[38,26,53,42,"default"],[38,33,53,42],[38,41,53,42,"DomHandler"],[38,51,53,42],[39,6,54,4,"_this"],[39,11,54,4],[39,18,54,4,"_callSuper"],[39,28,54,4],[39,29,54,4,"default"],[39,36,54,4],[39,44,54,4,"DomHandler"],[39,54,54,4],[39,57,54,10,"undefined"],[39,66,54,19],[39,68,54,21,"options"],[39,75,54,28],[39,77,54,30,"undefined"],[39,86,54,39],[40,6,54,41,"_this"],[40,11,54,41],[40,12,50,10,"ignoredTagsCount"],[40,28,50,26],[40,31,50,29],[40,32,50,30],[40,33,50,31],[41,6,55,4],[41,10,55,8,"ignoredTags"],[41,21,55,46],[41,24,55,49],[41,25,55,50],[41,26,55,51],[42,6,56,4],[42,11,56,9],[42,15,56,15,"tag"],[42,18,56,18],[42,22,56,22,"options"],[42,29,56,29],[42,30,56,30,"ignoredTags"],[42,41,56,41],[42,45,56,45],[42,47,56,47],[42,49,56,49],[43,8,57,6,"ignoredTags"],[43,19,57,17],[43,20,57,18,"tag"],[43,23,57,21],[43,24,57,22],[43,27,57,25],[43,31,57,29],[44,6,58,4],[45,6,59,4,"_this"],[45,11,59,4],[45,12,59,9,"ignoredTags"],[45,23,59,20],[45,26,59,23,"ignoredTags"],[45,37,59,34],[46,6,60,4,"_this"],[46,11,60,4],[46,12,60,9,"visitors"],[46,20,60,17],[46,23,60,20,"options"],[46,30,60,27],[46,31,60,28,"visitors"],[46,39,60,36],[46,43,60,40],[46,44,60,41],[46,45,60,42],[47,6,61,4],[47,10,61,10,"isIgnored"],[47,19,61,19],[47,22,61,22,"_this"],[47,27,61,22],[47,28,61,27,"isIgnored"],[47,37,61,36],[47,38,61,37,"bind"],[47,42,61,41],[47,43,61,41,"_this"],[47,48,61,46],[47,49,61,47],[48,6,62,4],[48,10,62,8,"options"],[48,17,62,15],[48,18,62,16,"ignoreNode"],[48,28,62,26],[48,30,62,28],[49,8,63,6,"_this"],[49,13,63,6],[49,14,63,11,"isIgnored"],[49,23,63,20],[49,26,63,24,"node"],[49,30,63,28],[49,34,63,33],[50,10,64,8],[50,17,65,10,"isIgnored"],[50,26,65,19],[50,27,65,20,"node"],[50,31,65,24],[50,32,65,25],[50,36,66,10,"options"],[50,43,66,17],[50,44,66,18,"ignoreNode"],[50,54,66,28],[50,55,66,30,"node"],[50,59,66,34],[50,61,66,36,"_this"],[50,66,66,36],[50,67,66,41,"tagStack"],[50,75,66,49],[50,76,66,50,"_this"],[50,81,66,50],[50,82,66,55,"tagStack"],[50,90,66,63],[50,91,66,64,"length"],[50,97,66,70],[50,100,66,73],[50,101,66,74],[50,102,66,75],[50,103,66,76],[51,8,68,6],[51,9,68,7],[52,6,69,4],[53,6,69,5],[53,13,69,5,"_this"],[53,18,69,5],[54,4,70,2],[55,4,70,3],[55,8,70,3,"_inherits"],[55,17,70,3],[55,18,70,3,"default"],[55,25,70,3],[55,27,70,3,"DomHandler"],[55,37,70,3],[55,39,70,3,"_OriginalDomHandler"],[55,58,70,3],[56,4,70,3],[56,15,70,3,"_createClass"],[56,27,70,3],[56,28,70,3,"default"],[56,35,70,3],[56,37,70,3,"DomHandler"],[56,47,70,3],[57,6,70,3,"key"],[57,9,70,3],[58,6,70,3,"value"],[58,11,70,3],[58,13,72,2],[58,22,72,2,"isIgnored"],[58,31,72,11,"isIgnored"],[58,32,72,12,"node"],[58,36,72,22],[58,38,72,50],[59,8,73,4],[59,15,74,7],[59,19,74,11],[59,20,74,12,"ignoredTags"],[59,31,74,23],[59,32,74,25,"node"],[59,36,74,29],[59,37,74,42,"name"],[59,41,74,46],[59,42,74,47],[59,46,75,6],[59,50,75,10],[59,51,75,11,"ignoredTagsCount"],[59,67,75,27],[59,70,75,30],[59,71,75,31],[59,72,75,32],[60,6,77,2],[61,4,77,3],[62,6,77,3,"key"],[62,9,77,3],[63,6,77,3,"value"],[63,11,77,3],[63,13,79,2],[63,22,79,2,"addNode"],[63,29,79,9,"addNode"],[63,30,79,10,"node"],[63,34,79,20],[63,36,79,28],[64,8,80,4],[64,12,80,8],[64,16,80,12],[64,17,80,13,"isIgnored"],[64,26,80,22],[64,27,80,23,"node"],[64,31,80,27],[64,32,80,28],[64,37,80,33],[64,41,80,37],[64,43,80,39],[65,10,81,6],[66,10,82,6],[66,14,82,10],[66,18,82,10,"isDomElement"],[66,27,82,22],[66,28,82,22,"isDomElement"],[66,40,82,22],[66,42,82,23,"node"],[66,46,82,27],[66,47,82,28],[66,49,82,30],[67,12,83,8],[67,16,83,12],[67,17,83,13,"ignoredTagsCount"],[67,33,83,29],[67,35,83,31],[68,10,84,6],[69,8,85,4],[69,9,85,5],[69,15,85,11],[70,10,86,6],[70,14,86,6,"_superPropGet"],[70,27,86,6],[70,28,86,6,"default"],[70,35,86,6],[70,37,86,6,"DomHandler"],[70,47,86,6],[70,70,86,20,"node"],[70,74,86,24],[71,10,87,6],[71,14,87,10],[71,18,87,10,"isDomText"],[71,27,87,19],[71,28,87,19,"isDomText"],[71,37,87,19],[71,39,87,20,"node"],[71,43,87,24],[71,44,87,25],[71,46,87,27],[72,12,88,8],[72,16,88,12],[72,17,88,13,"visitors"],[72,25,88,21],[72,26,88,22,"onText"],[72,32,88,28],[72,35,88,31,"node"],[72,39,88,35],[72,40,88,36],[73,10,89,6],[74,8,90,4],[75,6,91,2],[76,4,91,3],[77,6,91,3,"key"],[77,9,91,3],[78,6,91,3,"value"],[78,11,91,3],[78,13,93,2],[78,22,93,2,"ontext"],[78,28,93,8,"ontext"],[78,29,93,9,"text"],[78,33,93,21],[78,35,93,23],[79,8,94,4],[80,8,95,4],[81,8,96,4],[81,12,96,8],[81,16,96,12],[81,17,96,13,"ignoredTagsCount"],[81,33,96,29],[81,36,96,32],[81,37,96,33],[81,39,96,35],[82,10,97,6],[82,14,97,6,"_superPropGet"],[82,27,97,6],[82,28,97,6,"default"],[82,35,97,6],[82,37,97,6,"DomHandler"],[82,47,97,6],[82,69,97,19,"text"],[82,73,97,23],[83,8,98,4],[84,6,99,2],[85,4,99,3],[86,6,99,3,"key"],[86,9,99,3],[87,6,99,3,"value"],[87,11,99,3],[87,13,101,2],[87,22,101,2,"onopentag"],[87,31,101,11,"onopentag"],[87,32,101,12,"name"],[87,36,101,24],[87,38,101,26,"attribs"],[87,45,101,38],[87,47,101,46],[88,8,102,4],[88,12,102,4,"_superPropGet"],[88,25,102,4],[88,26,102,4,"default"],[88,33,102,4],[88,35,102,4,"DomHandler"],[88,45,102,4],[88,70,102,20,"name"],[88,74,102,24],[88,76,102,26,"attribs"],[88,83,102,33],[89,6,103,2],[90,4,103,3],[91,6,103,3,"key"],[91,9,103,3],[92,6,103,3,"value"],[92,11,103,3],[92,13,105,2],[92,22,105,2,"onclosetag"],[92,32,105,12,"onclosetag"],[92,33,105,12],[92,35,105,15],[93,8,106,4],[94,8,107,4],[94,12,107,8],[94,13,107,9,"visitors"],[94,21,107,17],[94,22,107,18,"onElement"],[94,31,107,27],[94,34,108,6],[94,38,108,10],[94,39,108,11,"tagStack"],[94,47,108,19],[94,48,108,20],[94,52,108,24],[94,53,108,25,"tagStack"],[94,61,108,33],[94,62,108,34,"length"],[94,68,108,40],[94,71,108,43],[94,72,108,44],[94,73,109,4],[94,74,109,5],[95,8,110,4],[95,12,110,4,"_superPropGet"],[95,25,110,4],[95,26,110,4,"default"],[95,33,110,4],[95,35,110,4,"DomHandler"],[95,45,110,4],[96,8,111,4],[96,12,111,8],[96,16,111,12],[96,17,111,13,"ignoredTagsCount"],[96,33,111,29],[96,36,111,32],[96,37,111,33],[96,38,111,34],[96,40,111,36],[97,10,112,6],[97,14,112,10],[97,15,112,11,"ignoredTagsCount"],[97,31,112,27],[97,33,112,29],[98,8,113,4],[99,6,114,2],[100,4,114,3],[101,6,114,3,"key"],[101,9,114,3],[102,6,114,3,"value"],[102,11,114,3],[102,13,116,2],[102,22,116,2,"onend"],[102,27,116,7,"onend"],[102,28,116,7],[102,30,116,16],[103,8,117,4],[103,12,117,8],[103,13,117,9,"visitors"],[103,21,117,17],[103,22,117,18,"onDocument"],[103,32,117,28],[103,35,117,31],[103,39,117,35],[103,40,117,36,"root"],[103,44,117,40],[103,45,117,41],[104,6,118,2],[105,4,118,3],[106,2,118,3],[106,4,48,40,"OriginalDomHandler"],[106,15,48,58],[106,16,48,58,"DomHandler"],[106,26,48,58],[107,0,48,58],[107,3]],"functionMap":{"names":["<global>","DomHandler","constructor","isIgnored","addNode","ontext","onopentag","onclosetag","onend"],"mappings":"AAA;eC+C;ECK;uBCU;ODK;GDE;EEE;GFK;EGE;GHY;EIE;GJM;EKE;GLE;EME;GNS;EOE;GPE;CDC"},"hasCjsExports":false},"type":"js/module"}]}