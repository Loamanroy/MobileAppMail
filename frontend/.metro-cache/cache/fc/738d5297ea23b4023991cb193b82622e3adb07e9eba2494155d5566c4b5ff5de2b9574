{"dependencies":[{"name":"../model/HTMLElementModel","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":57},"end":{"line":2,"column":57,"index":114}}],"key":"YFxY1JdGTTH8/5Xu3LHV8mquvI0=","exportNames":["*"],"imports":1}},{"name":"../dom/dom-utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":59,"index":174}}],"key":"55+ObDi2SOqMSUJNyn4SOizcYeQ=","exportNames":["*"],"imports":1}},{"name":"./TBlockCtor","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":288},"end":{"line":6,"column":38,"index":326}}],"key":"73mN8KSJ6JLfeT5KXVXkWCMjbsM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"TDocumentCtor\", {\n    enumerable: true,\n    get: function () {\n      return TDocumentCtor;\n    }\n  });\n  var _modelHTMLElementModel = require(_dependencyMap[0], \"../model/HTMLElementModel\");\n  var HTMLElementModel = _interopDefault(_modelHTMLElementModel);\n  var _domDomUtils = require(_dependencyMap[1], \"../dom/dom-utils\");\n  var _TBlockCtor = require(_dependencyMap[2], \"./TBlockCtor\");\n  var TBlockImpl = _interopDefault(_TBlockCtor);\n  var defaultContextBase = Object.freeze({\n    baseHref: 'about:blank',\n    baseTarget: '_self',\n    charset: 'utf-8',\n    title: '',\n    lang: 'en',\n    dir: 'ltr',\n    links: [],\n    meta: []\n  });\n  function getDefaultDocumentContext() {\n    return Object.assign({}, defaultContextBase, {\n      links: [],\n      meta: []\n    });\n  }\n  function extractContextFromHead(head, lang, dir) {\n    var context = getDefaultDocumentContext();\n    if (lang) {\n      context.lang = lang;\n    }\n    if (dir) {\n      context.dir = 'rtl';\n    }\n    var domNode = head.domNode;\n    var children = domNode.children;\n    children.filter(_domDomUtils.isDomElement).forEach(child => {\n      if (child.tagName === 'meta') {\n        if (child.attribs.name) {\n          context.meta.push(child.attribs);\n        } else if (child.attribs.charset) {\n          context.charset = child.attribs.charset.toLowerCase();\n        }\n      } else if (child.tagName === 'link') {\n        context.links.push(child.attribs);\n      } else if (child.tagName === 'title') {\n        for (var titleChild of child.children.filter(_domDomUtils.isDomText)) {\n          context.title = titleChild.data.trim();\n          break;\n        }\n      } else if (child.tagName === 'base') {\n        context.baseHref = child.attribs.href || context.baseHref;\n        context.baseTarget = child.attribs.target || context.baseTarget;\n      }\n    });\n    return context;\n  }\n  var htmlModel = HTMLElementModel.default.fromNativeModel({\n    tagName: 'html',\n    category: 'grouping'\n  });\n  var TDocumentCtor = function TDocument(init) {\n    this.initialize(init);\n  };\n  TDocumentCtor.prototype = Object.create(TBlockImpl.default.prototype);\n  Object.defineProperty(TDocumentCtor.prototype, 'tagName', {\n    value: 'html',\n    writable: false\n  });\n  Object.defineProperty(TDocumentCtor.prototype, 'type', {\n    value: 'document',\n    writable: false\n  });\n  Object.defineProperty(TDocumentCtor.prototype, 'displayName', {\n    value: 'TDocument',\n    writable: false\n  });\n  Object.defineProperty(TDocumentCtor.prototype, 'elementModel', {\n    value: htmlModel,\n    writable: false\n  });\n  TDocumentCtor.prototype.parseChildren = function parseChildren() {\n    var head;\n    for (var child of this.children) {\n      if (child.tagName === 'head') {\n        head = child;\n        break;\n      }\n    }\n    this.context = Object.freeze(head ? extractContextFromHead(head, this.attributes.lang, this.attributes.dir) : {\n      ...getDefaultDocumentContext(),\n      lang: this.attributes.lang,\n      dir: this.attributes.dir\n    });\n  };\n  var _default = TDocumentCtor;\n});","lineCount":115,"map":[[12,2,127,0,"Object"],[12,8,127,0],[12,9,127,0,"defineProperty"],[12,23,127,0],[12,24,127,0,"exports"],[12,31,127,0],[13,4,127,0,"enumerable"],[13,14,127,0],[14,4,127,0,"get"],[14,7,127,0],[14,18,127,0,"get"],[14,19,127,0],[15,6,127,0],[15,13,127,0,"_default"],[15,21,127,0],[16,4,127,0],[17,2,127,0],[18,2,125,0,"Object"],[18,8,125,0],[18,9,125,0,"defineProperty"],[18,23,125,0],[18,24,125,0,"exports"],[18,31,125,0],[19,4,125,0,"enumerable"],[19,14,125,0],[20,4,125,0,"get"],[20,7,125,0],[20,18,125,0,"get"],[20,19,125,0],[21,6,125,0],[21,13,125,9,"TDocumentCtor"],[21,26,125,22],[22,4,125,22],[23,2,125,22],[24,2,2,0],[24,6,2,0,"_modelHTMLElementModel"],[24,28,2,0],[24,31,2,0,"require"],[24,38,2,0],[24,39,2,0,"_dependencyMap"],[24,53,2,0],[25,2,2,0],[25,6,2,0,"HTMLElementModel"],[25,22,2,0],[25,25,2,0,"_interopDefault"],[25,40,2,0],[25,41,2,0,"_modelHTMLElementModel"],[25,63,2,0],[26,2,3,0],[26,6,3,0,"_domDomUtils"],[26,18,3,0],[26,21,3,0,"require"],[26,28,3,0],[26,29,3,0,"_dependencyMap"],[26,43,3,0],[27,2,6,0],[27,6,6,0,"_TBlockCtor"],[27,17,6,0],[27,20,6,0,"require"],[27,27,6,0],[27,28,6,0,"_dependencyMap"],[27,42,6,0],[28,2,6,0],[28,6,6,0,"TBlockImpl"],[28,16,6,0],[28,19,6,0,"_interopDefault"],[28,34,6,0],[28,35,6,0,"_TBlockCtor"],[28,46,6,0],[29,2,19,0],[29,6,19,6,"defaultContextBase"],[29,24,19,41],[29,27,19,44,"Object"],[29,33,19,50],[29,34,19,51,"freeze"],[29,40,19,57],[29,41,19,58],[30,4,20,2,"baseHref"],[30,12,20,10],[30,14,20,12],[30,27,20,25],[31,4,21,2,"baseTarget"],[31,14,21,12],[31,16,21,14],[31,23,21,21],[32,4,22,2,"charset"],[32,11,22,9],[32,13,22,11],[32,20,22,18],[33,4,23,2,"title"],[33,9,23,7],[33,11,23,9],[33,13,23,11],[34,4,24,2,"lang"],[34,8,24,6],[34,10,24,8],[34,14,24,12],[35,4,25,2,"dir"],[35,7,25,5],[35,9,25,7],[35,14,25,12],[36,4,26,2,"links"],[36,9,26,7],[36,11,26,9],[36,13,26,11],[37,4,27,2,"meta"],[37,8,27,6],[37,10,27,8],[38,2,28,0],[38,3,28,1],[38,4,28,2],[39,2,30,0],[39,11,30,9,"getDefaultDocumentContext"],[39,36,30,34,"getDefaultDocumentContext"],[39,37,30,34],[39,39,30,54],[40,4,31,2],[40,11,31,9,"Object"],[40,17,31,15],[40,18,31,16,"assign"],[40,24,31,22],[40,25,31,23],[40,26,31,24],[40,27,31,25],[40,29,31,27,"defaultContextBase"],[40,47,31,45],[40,49,31,47],[41,6,31,49,"links"],[41,11,31,54],[41,13,31,56],[41,15,31,58],[42,6,31,60,"meta"],[42,10,31,64],[42,12,31,66],[43,4,31,69],[43,5,31,70],[43,6,31,71],[44,2,32,0],[45,2,34,0],[45,11,34,9,"extractContextFromHead"],[45,33,34,31,"extractContextFromHead"],[45,34,34,32,"head"],[45,38,34,48],[45,40,34,50,"lang"],[45,44,34,63],[45,46,34,65,"dir"],[45,49,34,77],[45,51,34,79],[46,4,35,2],[46,8,35,8,"context"],[46,15,35,15],[46,18,35,18,"getDefaultDocumentContext"],[46,43,35,43],[46,44,35,44],[46,45,35,45],[47,4,36,2],[47,8,36,6,"lang"],[47,12,36,10],[47,14,36,12],[48,6,37,4,"context"],[48,13,37,11],[48,14,37,12,"lang"],[48,18,37,16],[48,21,37,19,"lang"],[48,25,37,23],[49,4,38,2],[50,4,39,2],[50,8,39,6,"dir"],[50,11,39,9],[50,13,39,11],[51,6,40,4,"context"],[51,13,40,11],[51,14,40,12,"dir"],[51,17,40,15],[51,20,40,18],[51,25,40,23],[52,4,41,2],[53,4,42,2],[53,8,42,8,"domNode"],[53,15,42,15],[53,18,42,18,"head"],[53,22,42,22],[53,23,42,23,"domNode"],[53,30,42,30],[54,4,43,2],[54,8,43,8,"children"],[54,16,43,16],[54,19,43,19,"domNode"],[54,26,43,26],[54,27,43,27,"children"],[54,35,43,35],[55,4,44,2,"children"],[55,12,44,10],[55,13,44,11,"filter"],[55,19,44,17],[55,20,44,18,"isDomElement"],[55,32,44,30],[55,33,44,30,"isDomElement"],[55,45,44,30],[55,46,44,31],[55,47,44,32,"forEach"],[55,54,44,39],[55,55,44,41,"child"],[55,60,44,46],[55,64,44,51],[56,6,45,4],[56,10,45,8,"child"],[56,15,45,13],[56,16,45,14,"tagName"],[56,23,45,21],[56,28,45,26],[56,34,45,32],[56,36,45,34],[57,8,46,6],[57,12,46,10,"child"],[57,17,46,15],[57,18,46,16,"attribs"],[57,25,46,23],[57,26,46,24,"name"],[57,30,46,28],[57,32,46,30],[58,10,47,8,"context"],[58,17,47,15],[58,18,47,16,"meta"],[58,22,47,20],[58,23,47,21,"push"],[58,27,47,25],[58,28,47,26,"child"],[58,33,47,31],[58,34,47,32,"attribs"],[58,41,47,46],[58,42,47,47],[59,8,48,6],[59,9,48,7],[59,15,48,13],[59,19,48,17,"child"],[59,24,48,22],[59,25,48,23,"attribs"],[59,32,48,30],[59,33,48,31,"charset"],[59,40,48,38],[59,42,48,40],[60,10,49,8,"context"],[60,17,49,15],[60,18,49,16,"charset"],[60,25,49,23],[60,28,49,26,"child"],[60,33,49,31],[60,34,49,32,"attribs"],[60,41,49,39],[60,42,49,40,"charset"],[60,49,49,47],[60,50,49,48,"toLowerCase"],[60,61,49,59],[60,62,49,60],[60,63,49,61],[61,8,50,6],[62,6,51,4],[62,7,51,5],[62,13,51,11],[62,17,51,15,"child"],[62,22,51,20],[62,23,51,21,"tagName"],[62,30,51,28],[62,35,51,33],[62,41,51,39],[62,43,51,41],[63,8,52,6,"context"],[63,15,52,13],[63,16,52,14,"links"],[63,21,52,19],[63,22,52,20,"push"],[63,26,52,24],[63,27,52,25,"child"],[63,32,52,30],[63,33,52,31,"attribs"],[63,40,52,38],[63,41,52,39],[64,6,53,4],[64,7,53,5],[64,13,53,11],[64,17,53,15,"child"],[64,22,53,20],[64,23,53,21,"tagName"],[64,30,53,28],[64,35,53,33],[64,42,53,40],[64,44,53,42],[65,8,54,6],[65,13,54,11],[65,17,54,17,"titleChild"],[65,27,54,27],[65,31,54,31,"child"],[65,36,54,36],[65,37,54,37,"children"],[65,45,54,45],[65,46,54,46,"filter"],[65,52,54,52],[65,53,54,53,"isDomText"],[65,65,54,62],[65,66,54,62,"isDomText"],[65,75,54,62],[65,76,54,63],[65,78,54,65],[66,10,55,8,"context"],[66,17,55,15],[66,18,55,16,"title"],[66,23,55,21],[66,26,55,24,"titleChild"],[66,36,55,34],[66,37,55,35,"data"],[66,41,55,39],[66,42,55,40,"trim"],[66,46,55,44],[66,47,55,45],[66,48,55,46],[67,10,56,8],[68,8,57,6],[69,6,58,4],[69,7,58,5],[69,13,58,11],[69,17,58,15,"child"],[69,22,58,20],[69,23,58,21,"tagName"],[69,30,58,28],[69,35,58,33],[69,41,58,39],[69,43,58,41],[70,8,59,6,"context"],[70,15,59,13],[70,16,59,14,"baseHref"],[70,24,59,22],[70,27,59,25,"child"],[70,32,59,30],[70,33,59,31,"attribs"],[70,40,59,38],[70,41,59,39,"href"],[70,45,59,43],[70,49,59,47,"context"],[70,56,59,54],[70,57,59,55,"baseHref"],[70,65,59,63],[71,8,60,6,"context"],[71,15,60,13],[71,16,60,14,"baseTarget"],[71,26,60,24],[71,29,60,28,"child"],[71,34,60,33],[71,35,60,34,"attribs"],[71,42,60,41],[71,43,60,42,"target"],[71,49,60,48],[71,53,60,60,"context"],[71,60,60,67],[71,61,60,68,"baseTarget"],[71,71,60,78],[72,6,61,4],[73,4,62,2],[73,5,62,3],[73,6,62,4],[74,4,63,2],[74,11,63,9,"context"],[74,18,63,16],[75,2,64,0],[76,2,66,0],[76,6,66,6,"htmlModel"],[76,15,66,15],[76,18,66,18,"HTMLElementModel"],[76,34,66,34],[76,35,66,34,"default"],[76,42,66,34],[76,43,66,35,"fromNativeModel"],[76,58,66,50],[76,59,66,51],[77,4,67,2,"tagName"],[77,11,67,9],[77,13,67,11],[77,19,67,24],[78,4,68,2,"category"],[78,12,68,10],[78,14,68,12],[79,2,69,0],[79,3,69,1],[79,4,69,2],[80,2,71,0],[80,6,71,6,"TDocumentCtor"],[80,19,71,19],[80,22,71,22],[80,31,71,31,"TDocument"],[80,40,71,40,"TDocument"],[80,41,73,2,"init"],[80,45,73,21],[80,47,74,2],[81,4,75,2],[81,8,75,6],[81,9,75,7,"initialize"],[81,19,75,17],[81,20,75,18,"init"],[81,24,75,35],[81,25,75,36],[82,2,76,0],[82,3,76,63],[83,2,78,0,"TDocumentCtor"],[83,15,78,13],[83,16,78,14,"prototype"],[83,25,78,23],[83,28,78,26,"Object"],[83,34,78,32],[83,35,78,33,"create"],[83,41,78,39],[83,42,78,40,"TBlockImpl"],[83,52,78,50],[83,53,78,50,"default"],[83,60,78,50],[83,61,78,51,"prototype"],[83,70,78,60],[83,71,78,61],[84,2,80,0,"Object"],[84,8,80,6],[84,9,80,7,"defineProperty"],[84,23,80,21],[84,24,80,22,"TDocumentCtor"],[84,37,80,35],[84,38,80,36,"prototype"],[84,47,80,45],[84,49,80,47],[84,58,80,56],[84,60,80,58],[85,4,81,2,"value"],[85,9,81,7],[85,11,81,9],[85,17,81,15],[86,4,82,2,"writable"],[86,12,82,10],[86,14,82,12],[87,2,83,0],[87,3,83,1],[87,4,83,2],[88,2,85,0,"Object"],[88,8,85,6],[88,9,85,7,"defineProperty"],[88,23,85,21],[88,24,85,22,"TDocumentCtor"],[88,37,85,35],[88,38,85,36,"prototype"],[88,47,85,45],[88,49,85,47],[88,55,85,53],[88,57,85,55],[89,4,86,2,"value"],[89,9,86,7],[89,11,86,9],[89,21,86,19],[90,4,87,2,"writable"],[90,12,87,10],[90,14,87,12],[91,2,88,0],[91,3,88,1],[91,4,88,2],[92,2,90,0,"Object"],[92,8,90,6],[92,9,90,7,"defineProperty"],[92,23,90,21],[92,24,90,22,"TDocumentCtor"],[92,37,90,35],[92,38,90,36,"prototype"],[92,47,90,45],[92,49,90,47],[92,62,90,60],[92,64,90,62],[93,4,91,2,"value"],[93,9,91,7],[93,11,91,9],[93,22,91,20],[94,4,92,2,"writable"],[94,12,92,10],[94,14,92,12],[95,2,93,0],[95,3,93,1],[95,4,93,2],[96,2,95,0,"Object"],[96,8,95,6],[96,9,95,7,"defineProperty"],[96,23,95,21],[96,24,95,22,"TDocumentCtor"],[96,37,95,35],[96,38,95,36,"prototype"],[96,47,95,45],[96,49,95,47],[96,63,95,61],[96,65,95,63],[97,4,96,2,"value"],[97,9,96,7],[97,11,96,9,"htmlModel"],[97,20,96,18],[98,4,97,2,"writable"],[98,12,97,10],[98,14,97,12],[99,2,98,0],[99,3,98,1],[99,4,98,2],[100,2,100,0,"TDocumentCtor"],[100,15,100,13],[100,16,100,14,"prototype"],[100,25,100,23],[100,26,100,24,"parseChildren"],[100,39,100,37],[100,42,100,40],[100,51,100,49,"parseChildren"],[100,64,100,62,"parseChildren"],[100,65,100,62],[100,67,102,2],[101,4,103,2],[101,8,103,6,"head"],[101,12,103,34],[102,4,104,2],[102,9,104,7],[102,13,104,13,"child"],[102,18,104,18],[102,22,104,22],[102,26,104,26],[102,27,104,27,"children"],[102,35,104,35],[102,37,104,37],[103,6,105,4],[103,10,105,8,"child"],[103,15,105,13],[103,16,105,14,"tagName"],[103,23,105,21],[103,28,105,26],[103,34,105,32],[103,36,105,34],[104,8,106,6,"head"],[104,12,106,10],[104,15,106,13,"child"],[104,20,106,43],[105,8,107,6],[106,6,108,4],[107,4,109,2],[108,4,110,2],[108,8,110,6],[108,9,110,7,"context"],[108,16,110,14],[108,19,110,17,"Object"],[108,25,110,23],[108,26,110,24,"freeze"],[108,32,110,30],[108,33,111,4,"head"],[108,37,111,8],[108,40,112,8,"extractContextFromHead"],[108,62,112,30],[108,63,113,10,"head"],[108,67,113,14],[108,69,114,10],[108,73,114,14],[108,74,114,15,"attributes"],[108,84,114,25],[108,85,114,27,"lang"],[108,89,114,31],[108,91,115,10],[108,95,115,14],[108,96,115,15,"attributes"],[108,106,115,25],[108,107,115,27,"dir"],[108,110,116,8],[108,111,116,9],[108,114,117,8],[109,6,118,10],[109,9,118,13,"getDefaultDocumentContext"],[109,34,118,38],[109,35,118,39],[109,36,118,40],[110,6,119,10,"lang"],[110,10,119,14],[110,12,119,16],[110,16,119,20],[110,17,119,21,"attributes"],[110,27,119,31],[110,28,119,33,"lang"],[110,32,119,37],[111,6,120,10,"dir"],[111,9,120,13],[111,11,120,15],[111,15,120,19],[111,16,120,20,"attributes"],[111,26,120,30],[111,27,120,32,"dir"],[112,4,121,8],[112,5,122,2],[112,6,122,3],[113,2,123,0],[113,3,123,1],[114,2,127,0],[114,6,127,0,"_default"],[114,14,127,0],[114,17,127,15,"TDocumentCtor"],[114,30,127,28],[115,0,127,29],[115,3]],"functionMap":{"names":["<global>","getDefaultDocumentContext","extractContextFromHead","children.filter.forEach$argument_0","TDocument","parseChildren"],"mappings":"AAA;AC6B;CDE;AEE;wCCU;GDkB;CFE;sBIO;CJK;wCKwB;CLuB"},"hasCjsExports":false},"type":"js/module"}]}