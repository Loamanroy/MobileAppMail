{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":63,"index":63}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./RenderTTree","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":166},"end":{"line":4,"column":40,"index":206}}],"key":"OYDB8xXxTDc1P4DK1/PpA5hNsRY=","exportNames":["*"],"imports":1}},{"name":"./context/sourceLoaderContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":207},"end":{"line":5,"column":64,"index":271}}],"key":"NK2hpPJQdIQgu8/nNT77gIT1Xq0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return SourceLoaderUri;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopDefault(_react);\n  var _RenderTTree = require(_dependencyMap[3], \"./RenderTTree\");\n  var RenderTTree = _interopDefault(_RenderTTree);\n  var _contextSourceLoaderContext = require(_dependencyMap[4], \"./context/sourceLoaderContext\");\n  var sourceLoaderContext = _interopDefault(_contextSourceLoaderContext);\n  var ERROR_STATE = {\n    error: true,\n    resolvedHTML: null\n  };\n  function loadHTMLResource(_x, _x2) {\n    return _loadHTMLResource.apply(this, arguments);\n  }\n  function _loadHTMLResource() {\n    _loadHTMLResource = (0, _asyncToGenerator.default)(function* (uri, _ref) {\n      var body = _ref.body,\n        headers = _ref.headers,\n        method = _ref.method;\n      var response = yield fetch(uri, {\n        body,\n        headers,\n        method\n      });\n      if (response.ok) {\n        var html = yield response.text();\n        return {\n          resolvedHTML: html,\n          error: false\n        };\n      }\n      return ERROR_STATE;\n    });\n    return _loadHTMLResource.apply(this, arguments);\n  }\n  function useUriSourceLoader(_ref2) {\n    var source = _ref2.source,\n      onHTMLLoaded = _ref2.onHTMLLoaded;\n    var _useState = (0, _react.useState)({\n        error: false,\n        resolvedHTML: null\n      }),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      loadState = _useState2[0],\n      setState = _useState2[1];\n    var error = loadState.error;\n\n    // Effect to reload on uri changes\n    (0, _react.useEffect)(() => {\n      var cancelled = false;\n      if (!error) {\n        setState({\n          error: false,\n          resolvedHTML: null\n        });\n        loadHTMLResource(source.uri, {\n          body: source.body,\n          headers: source.headers,\n          method: source.method\n        }).then(state => {\n          !cancelled && setState(state);\n        }).catch(() => {\n          !cancelled && setState(ERROR_STATE);\n        });\n      }\n      return () => {\n        cancelled = true;\n      };\n    }, [error, source.uri, source.body, source.headers, source.method]);\n    (0, _react.useEffect)(() => {\n      loadState.resolvedHTML && onHTMLLoaded?.call(null, loadState.resolvedHTML);\n    }, [loadState.resolvedHTML, onHTMLLoaded]);\n    return loadState;\n  }\n  function SourceLoaderUri(props) {\n    var _useContext = (0, _react.useContext)(sourceLoaderContext.default),\n      remoteErrorView = _useContext.remoteErrorView,\n      remoteLoadingView = _useContext.remoteLoadingView;\n    var _useUriSourceLoader = useUriSourceLoader(props),\n      resolvedHTML = _useUriSourceLoader.resolvedHTML,\n      error = _useUriSourceLoader.error;\n    if (error) {\n      return remoteErrorView.call(null, props.source);\n    }\n    if (resolvedHTML === null) {\n      return remoteLoadingView.call(null, props.source);\n    }\n    return /*#__PURE__*/React.default.createElement(RenderTTree.default, {\n      document: resolvedHTML,\n      baseUrl: props.source.uri\n    });\n  }\n});","lineCount":113,"map":[[12,2,74,15,"Object"],[12,8,74,15],[12,9,74,15,"defineProperty"],[12,23,74,15],[12,24,74,15,"exports"],[12,31,74,15],[13,4,74,15,"enumerable"],[13,14,74,15],[14,4,74,15,"get"],[14,7,74,15],[14,18,74,15,"get"],[14,19,74,15],[15,6,74,15],[15,13,74,15,"SourceLoaderUri"],[15,28,74,15],[16,4,74,15],[17,2,74,15],[18,2,88,1],[18,6,88,1,"_babelRuntimeHelpersSlicedToArray"],[18,39,88,1],[18,42,88,1,"require"],[18,49,88,1],[18,50,88,1,"_dependencyMap"],[18,64,88,1],[19,2,88,1],[19,6,88,1,"_slicedToArray"],[19,20,88,1],[19,23,88,1,"_interopDefault"],[19,38,88,1],[19,39,88,1,"_babelRuntimeHelpersSlicedToArray"],[19,72,88,1],[20,2,88,1],[20,6,88,1,"_babelRuntimeHelpersAsyncToGenerator"],[20,42,88,1],[20,45,88,1,"require"],[20,52,88,1],[20,53,88,1,"_dependencyMap"],[20,67,88,1],[21,2,88,1],[21,6,88,1,"_asyncToGenerator"],[21,23,88,1],[21,26,88,1,"_interopDefault"],[21,41,88,1],[21,42,88,1,"_babelRuntimeHelpersAsyncToGenerator"],[21,78,88,1],[22,2,1,0],[22,6,1,0,"_react"],[22,12,1,0],[22,15,1,0,"require"],[22,22,1,0],[22,23,1,0,"_dependencyMap"],[22,37,1,0],[23,2,1,0],[23,6,1,0,"React"],[23,11,1,0],[23,14,1,0,"_interopDefault"],[23,29,1,0],[23,30,1,0,"_react"],[23,36,1,0],[24,2,4,0],[24,6,4,0,"_RenderTTree"],[24,18,4,0],[24,21,4,0,"require"],[24,28,4,0],[24,29,4,0,"_dependencyMap"],[24,43,4,0],[25,2,4,0],[25,6,4,0,"RenderTTree"],[25,17,4,0],[25,20,4,0,"_interopDefault"],[25,35,4,0],[25,36,4,0,"_RenderTTree"],[25,48,4,0],[26,2,5,0],[26,6,5,0,"_contextSourceLoaderContext"],[26,33,5,0],[26,36,5,0,"require"],[26,43,5,0],[26,44,5,0,"_dependencyMap"],[26,58,5,0],[27,2,5,0],[27,6,5,0,"sourceLoaderContext"],[27,25,5,0],[27,28,5,0,"_interopDefault"],[27,43,5,0],[27,44,5,0,"_contextSourceLoaderContext"],[27,71,5,0],[28,2,12,0],[28,6,12,6,"ERROR_STATE"],[28,17,12,17],[28,20,12,20],[29,4,13,2,"error"],[29,9,13,7],[29,11,13,9],[29,15,13,13],[30,4,14,2,"resolvedHTML"],[30,16,14,14],[30,18,14,16],[31,2,15,0],[31,3,15,1],[32,2,15,2],[32,11,17,15,"loadHTMLResource"],[32,27,17,31,"loadHTMLResource"],[32,28,17,31,"_x"],[32,30,17,31],[32,32,17,31,"_x2"],[32,35,17,31],[33,4,17,31],[33,11,17,31,"_loadHTMLResource"],[33,28,17,31],[33,29,17,31,"apply"],[33,34,17,31],[33,41,17,31,"arguments"],[33,50,17,31],[34,2,17,31],[35,2,17,31],[35,11,17,31,"_loadHTMLResource"],[35,29,17,31],[36,4,17,31,"_loadHTMLResource"],[36,21,17,31],[36,28,17,31,"_asyncToGenerator"],[36,45,17,31],[36,46,17,31,"default"],[36,53,17,31],[36,55,17,0],[36,66,18,2,"uri"],[36,69,18,13],[36,71,18,13,"_ref"],[36,75,18,13],[36,77,20,32],[37,6,20,32],[37,10,19,4,"body"],[37,14,19,8],[37,17,19,8,"_ref"],[37,21,19,8],[37,22,19,4,"body"],[37,26,19,8],[38,8,19,10,"headers"],[38,15,19,17],[38,18,19,17,"_ref"],[38,22,19,17],[38,23,19,10,"headers"],[38,30,19,17],[39,8,19,19,"method"],[39,14,19,25],[39,17,19,25,"_ref"],[39,21,19,25],[39,22,19,19,"method"],[39,28,19,25],[40,6,21,2],[40,10,21,8,"response"],[40,18,21,16],[40,27,21,25,"fetch"],[40,32,21,30],[40,33,21,31,"uri"],[40,36,21,34],[40,38,21,36],[41,8,22,4,"body"],[41,12,22,8],[42,8,23,4,"headers"],[42,15,23,11],[43,8,24,4,"method"],[44,6,25,2],[44,7,25,3],[44,8,25,4],[45,6,26,2],[45,10,26,6,"response"],[45,18,26,14],[45,19,26,15,"ok"],[45,21,26,17],[45,23,26,19],[46,8,27,4],[46,12,27,10,"html"],[46,16,27,14],[46,25,27,23,"response"],[46,33,27,31],[46,34,27,32,"text"],[46,38,27,36],[46,39,27,37],[46,40,27,38],[47,8,28,4],[47,15,28,11],[48,10,29,6,"resolvedHTML"],[48,22,29,18],[48,24,29,20,"html"],[48,28,29,24],[49,10,30,6,"error"],[49,15,30,11],[49,17,30,13],[50,8,31,4],[50,9,31,5],[51,6,32,2],[52,6,33,2],[52,13,33,9,"ERROR_STATE"],[52,24,33,20],[53,4,34,0],[53,5,34,1],[54,4,34,1],[54,11,34,1,"_loadHTMLResource"],[54,28,34,1],[54,29,34,1,"apply"],[54,34,34,1],[54,41,34,1,"arguments"],[54,50,34,1],[55,2,34,1],[56,2,40,0],[56,11,40,9,"useUriSourceLoader"],[56,29,40,27,"useUriSourceLoader"],[56,30,40,27,"_ref2"],[56,35,40,27],[56,37,40,76],[57,4,40,76],[57,8,40,30,"source"],[57,14,40,36],[57,17,40,36,"_ref2"],[57,22,40,36],[57,23,40,30,"source"],[57,29,40,36],[58,6,40,38,"onHTMLLoaded"],[58,18,40,50],[58,21,40,50,"_ref2"],[58,26,40,50],[58,27,40,38,"onHTMLLoaded"],[58,39,40,50],[59,4,41,2],[59,8,41,2,"_useState"],[59,17,41,2],[59,20,41,32],[59,24,41,32,"useState"],[59,30,41,40],[59,31,41,40,"useState"],[59,39,41,40],[59,41,41,62],[60,8,42,4,"error"],[60,13,42,9],[60,15,42,11],[60,20,42,16],[61,8,43,4,"resolvedHTML"],[61,20,43,16],[61,22,43,18],[62,6,44,2],[62,7,44,3],[62,8,44,4],[63,6,44,4,"_useState2"],[63,16,44,4],[63,23,44,4,"_slicedToArray"],[63,37,44,4],[63,38,44,4,"default"],[63,45,44,4],[63,47,44,4,"_useState"],[63,56,44,4],[64,6,41,9,"loadState"],[64,15,41,18],[64,18,41,18,"_useState2"],[64,28,41,18],[65,6,41,20,"setState"],[65,14,41,28],[65,17,41,28,"_useState2"],[65,27,41,28],[66,4,45,2],[66,8,45,10,"error"],[66,13,45,15],[66,16,45,20,"loadState"],[66,25,45,29],[66,26,45,10,"error"],[66,31,45,15],[68,4,47,2],[69,4,48,2],[69,8,48,2,"useEffect"],[69,14,48,11],[69,15,48,11,"useEffect"],[69,24,48,11],[69,26,48,12],[69,32,48,18],[70,6,49,4],[70,10,49,8,"cancelled"],[70,19,49,17],[70,22,49,20],[70,27,49,25],[71,6,50,4],[71,10,50,8],[71,11,50,9,"error"],[71,16,50,14],[71,18,50,16],[72,8,51,6,"setState"],[72,16,51,14],[72,17,51,15],[73,10,51,17,"error"],[73,15,51,22],[73,17,51,24],[73,22,51,29],[74,10,51,31,"resolvedHTML"],[74,22,51,43],[74,24,51,45],[75,8,51,50],[75,9,51,51],[75,10,51,52],[76,8,52,6,"loadHTMLResource"],[76,24,52,22],[76,25,52,23,"source"],[76,31,52,29],[76,32,52,30,"uri"],[76,35,52,33],[76,37,52,35],[77,10,53,8,"body"],[77,14,53,12],[77,16,53,14,"source"],[77,22,53,20],[77,23,53,21,"body"],[77,27,53,25],[78,10,54,8,"headers"],[78,17,54,15],[78,19,54,17,"source"],[78,25,54,23],[78,26,54,24,"headers"],[78,33,54,31],[79,10,55,8,"method"],[79,16,55,14],[79,18,55,16,"source"],[79,24,55,22],[79,25,55,23,"method"],[80,8,56,6],[80,9,56,7],[80,10,56,8],[80,11,57,9,"then"],[80,15,57,13],[80,16,57,15,"state"],[80,21,57,20],[80,25,57,25],[81,10,58,10],[81,11,58,11,"cancelled"],[81,20,58,20],[81,24,58,24,"setState"],[81,32,58,32],[81,33,58,33,"state"],[81,38,58,38],[81,39,58,39],[82,8,59,8],[82,9,59,9],[82,10,59,10],[82,11,60,9,"catch"],[82,16,60,14],[82,17,60,15],[82,23,60,21],[83,10,61,10],[83,11,61,11,"cancelled"],[83,20,61,20],[83,24,61,24,"setState"],[83,32,61,32],[83,33,61,33,"ERROR_STATE"],[83,44,61,44],[83,45,61,45],[84,8,62,8],[84,9,62,9],[84,10,62,10],[85,6,63,4],[86,6,64,4],[86,13,64,11],[86,19,64,17],[87,8,65,6,"cancelled"],[87,17,65,15],[87,20,65,18],[87,24,65,22],[88,6,66,4],[88,7,66,5],[89,4,67,2],[89,5,67,3],[89,7,67,5],[89,8,67,6,"error"],[89,13,67,11],[89,15,67,13,"source"],[89,21,67,19],[89,22,67,20,"uri"],[89,25,67,23],[89,27,67,25,"source"],[89,33,67,31],[89,34,67,32,"body"],[89,38,67,36],[89,40,67,38,"source"],[89,46,67,44],[89,47,67,45,"headers"],[89,54,67,52],[89,56,67,54,"source"],[89,62,67,60],[89,63,67,61,"method"],[89,69,67,67],[89,70,67,68],[89,71,67,69],[90,4,68,2],[90,8,68,2,"useEffect"],[90,14,68,11],[90,15,68,11,"useEffect"],[90,24,68,11],[90,26,68,12],[90,32,68,18],[91,6,69,4,"loadState"],[91,15,69,13],[91,16,69,14,"resolvedHTML"],[91,28,69,26],[91,32,69,30,"onHTMLLoaded"],[91,44,69,42],[91,46,69,44,"call"],[91,50,69,48],[91,51,69,49],[91,55,69,53],[91,57,69,55,"loadState"],[91,66,69,64],[91,67,69,65,"resolvedHTML"],[91,79,69,77],[91,80,69,78],[92,4,70,2],[92,5,70,3],[92,7,70,5],[92,8,70,6,"loadState"],[92,17,70,15],[92,18,70,16,"resolvedHTML"],[92,30,70,28],[92,32,70,30,"onHTMLLoaded"],[92,44,70,42],[92,45,70,43],[92,46,70,44],[93,4,71,2],[93,11,71,9,"loadState"],[93,20,71,18],[94,2,72,0],[95,2,74,15],[95,11,74,24,"SourceLoaderUri"],[95,26,74,39,"SourceLoaderUri"],[95,27,74,40,"props"],[95,32,74,67],[95,34,74,69],[96,4,75,2],[96,8,75,2,"_useContext"],[96,19,75,2],[96,22,76,4],[96,26,76,4,"useContext"],[96,32,76,14],[96,33,76,14,"useContext"],[96,43,76,14],[96,45,76,15,"sourceLoaderContext"],[96,64,76,34],[96,65,76,34,"default"],[96,72,76,34],[96,73,76,35],[97,6,75,10,"remoteErrorView"],[97,21,75,25],[97,24,75,25,"_useContext"],[97,35,75,25],[97,36,75,10,"remoteErrorView"],[97,51,75,25],[98,6,75,27,"remoteLoadingView"],[98,23,75,44],[98,26,75,44,"_useContext"],[98,37,75,44],[98,38,75,27,"remoteLoadingView"],[98,55,75,44],[99,4,77,2],[99,8,77,2,"_useUriSourceLoader"],[99,27,77,2],[99,30,77,34,"useUriSourceLoader"],[99,48,77,52],[99,49,77,53,"props"],[99,54,77,58],[99,55,77,59],[100,6,77,10,"resolvedHTML"],[100,18,77,22],[100,21,77,22,"_useUriSourceLoader"],[100,40,77,22],[100,41,77,10,"resolvedHTML"],[100,53,77,22],[101,6,77,24,"error"],[101,11,77,29],[101,14,77,29,"_useUriSourceLoader"],[101,33,77,29],[101,34,77,24,"error"],[101,39,77,29],[102,4,78,2],[102,8,78,6,"error"],[102,13,78,11],[102,15,78,13],[103,6,79,4],[103,13,79,11,"remoteErrorView"],[103,28,79,26],[103,29,79,27,"call"],[103,33,79,31],[103,34,79,32],[103,38,79,36],[103,40,79,38,"props"],[103,45,79,43],[103,46,79,44,"source"],[103,52,79,50],[103,53,79,51],[104,4,80,2],[105,4,81,2],[105,8,81,6,"resolvedHTML"],[105,20,81,18],[105,25,81,23],[105,29,81,27],[105,31,81,29],[106,6,82,4],[106,13,82,11,"remoteLoadingView"],[106,30,82,28],[106,31,82,29,"call"],[106,35,82,33],[106,36,82,34],[106,40,82,38],[106,42,82,40,"props"],[106,47,82,45],[106,48,82,46,"source"],[106,54,82,52],[106,55,82,53],[107,4,83,2],[108,4,84,2],[108,24,84,9,"React"],[108,29,84,14],[108,30,84,14,"default"],[108,37,84,14],[108,38,84,15,"createElement"],[108,51,84,28],[108,52,84,29,"RenderTTree"],[108,63,84,40],[108,64,84,40,"default"],[108,71,84,40],[108,73,84,42],[109,6,85,4,"document"],[109,14,85,12],[109,16,85,14,"resolvedHTML"],[109,28,85,27],[110,6,86,4,"baseUrl"],[110,13,86,11],[110,15,86,13,"props"],[110,20,86,18],[110,21,86,19,"source"],[110,27,86,25],[110,28,86,26,"uri"],[111,4,87,2],[111,5,87,3],[111,6,87,4],[112,2,88,0],[113,0,88,1],[113,3]],"functionMap":{"names":["<global>","loadHTMLResource","useUriSourceLoader","useEffect$argument_0","loadHTMLResource.then$argument_0","loadHTMLResource.then._catch$argument_0","<anonymous>","SourceLoaderUri"],"mappings":"AAA;ACgB;CDiB;AEM;YCQ;cCS;SDE;eEC;SFE;WGE;KHE;GDC;YCC;GDE;CFE;eOE;CPc"},"hasCjsExports":false},"type":"js/module"}]}