{"dependencies":[{"name":"../model/HTMLElementModel","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":47,"index":178},"end":{"line":8,"column":83,"index":214}}],"key":"bj79xFBRh7La7Grwwe50sc474tc=","exportNames":["*"],"imports":1}},{"name":"../dom/dom-utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":16,"index":234},"end":{"line":10,"column":43,"index":261}}],"key":"FEqXXeYTRhZzMq31cvYJirY6Y4k=","exportNames":["*"],"imports":1}},{"name":"./TBlockCtor","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":41,"index":305},"end":{"line":12,"column":64,"index":328}}],"key":"7pzmSTFj0t+YgGUGD1kXfpMZTUQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = exports.TDocumentCtor = void 0;\n  var _HTMLElementModel = _interopRequireDefault(require(_dependencyMap[0], \"../model/HTMLElementModel\"));\n  var _domUtils = require(_dependencyMap[1], \"../dom/dom-utils\");\n  var _TBlockCtor = _interopRequireDefault(require(_dependencyMap[2], \"./TBlockCtor\"));\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n  const defaultContextBase = Object.freeze({\n    baseHref: 'about:blank',\n    baseTarget: '_self',\n    charset: 'utf-8',\n    title: '',\n    lang: 'en',\n    dir: 'ltr',\n    links: [],\n    meta: []\n  });\n  function getDefaultDocumentContext() {\n    return Object.assign({}, defaultContextBase, {\n      links: [],\n      meta: []\n    });\n  }\n  function extractContextFromHead(head, lang, dir) {\n    const context = getDefaultDocumentContext();\n    if (lang) {\n      context.lang = lang;\n    }\n    if (dir) {\n      context.dir = 'rtl';\n    }\n    const domNode = head.domNode;\n    const children = domNode.children;\n    children.filter(_domUtils.isDomElement).forEach(child => {\n      if (child.tagName === 'meta') {\n        if (child.attribs.name) {\n          context.meta.push(child.attribs);\n        } else if (child.attribs.charset) {\n          context.charset = child.attribs.charset.toLowerCase();\n        }\n      } else if (child.tagName === 'link') {\n        context.links.push(child.attribs);\n      } else if (child.tagName === 'title') {\n        for (const titleChild of child.children.filter(_domUtils.isDomText)) {\n          context.title = titleChild.data.trim();\n          break;\n        }\n      } else if (child.tagName === 'base') {\n        context.baseHref = child.attribs.href || context.baseHref;\n        context.baseTarget = child.attribs.target || context.baseTarget;\n      }\n    });\n    return context;\n  }\n  const htmlModel = _HTMLElementModel.default.fromNativeModel({\n    tagName: 'html',\n    category: 'grouping'\n  });\n  const TDocumentCtor = function TDocument(init) {\n    this.initialize(init);\n  };\n  exports.TDocumentCtor = TDocumentCtor;\n  TDocumentCtor.prototype = Object.create(_TBlockCtor.default.prototype);\n  Object.defineProperty(TDocumentCtor.prototype, 'tagName', {\n    value: 'html',\n    writable: false\n  });\n  Object.defineProperty(TDocumentCtor.prototype, 'type', {\n    value: 'document',\n    writable: false\n  });\n  Object.defineProperty(TDocumentCtor.prototype, 'displayName', {\n    value: 'TDocument',\n    writable: false\n  });\n  Object.defineProperty(TDocumentCtor.prototype, 'elementModel', {\n    value: htmlModel,\n    writable: false\n  });\n  TDocumentCtor.prototype.parseChildren = function parseChildren() {\n    let head;\n    for (const child of this.children) {\n      if (child.tagName === 'head') {\n        head = child;\n        break;\n      }\n    }\n    this.context = Object.freeze(head ? extractContextFromHead(head, this.attributes.lang, this.attributes.dir) : Object.assign({}, getDefaultDocumentContext(), {\n      lang: this.attributes.lang,\n      dir: this.attributes.dir\n    }));\n  };\n  var _default = TDocumentCtor;\n  exports.default = _default;\n});","lineCount":103,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"default"],[7,17,6,15],[7,20,6,18,"exports"],[7,27,6,25],[7,28,6,26,"TDocumentCtor"],[7,41,6,39],[7,44,6,42],[7,49,6,47],[7,50,6,48],[8,2,8,0],[8,6,8,4,"_HTMLElementModel"],[8,23,8,21],[8,26,8,24,"_interopRequireDefault"],[8,48,8,46],[8,49,8,47,"require"],[8,56,8,54],[8,57,8,54,"_dependencyMap"],[8,71,8,54],[8,103,8,82],[8,104,8,83],[8,105,8,84],[9,2,10,0],[9,6,10,4,"_domUtils"],[9,15,10,13],[9,18,10,16,"require"],[9,25,10,23],[9,26,10,23,"_dependencyMap"],[9,40,10,23],[9,63,10,42],[9,64,10,43],[10,2,12,0],[10,6,12,4,"_TBlockCtor"],[10,17,12,15],[10,20,12,18,"_interopRequireDefault"],[10,42,12,40],[10,43,12,41,"require"],[10,50,12,48],[10,51,12,48,"_dependencyMap"],[10,65,12,48],[10,84,12,63],[10,85,12,64],[10,86,12,65],[11,2,14,0],[11,11,14,9,"_interopRequireDefault"],[11,33,14,31,"_interopRequireDefault"],[11,34,14,32,"obj"],[11,37,14,35],[11,39,14,37],[12,4,14,39],[12,11,14,46,"obj"],[12,14,14,49],[12,18,14,53,"obj"],[12,21,14,56],[12,22,14,57,"__esModule"],[12,32,14,67],[12,35,14,70,"obj"],[12,38,14,73],[12,41,14,76],[13,6,14,78,"default"],[13,13,14,85],[13,15,14,87,"obj"],[14,4,14,91],[14,5,14,92],[15,2,14,94],[16,2,16,0],[16,8,16,6,"defaultContextBase"],[16,26,16,24],[16,29,16,27,"Object"],[16,35,16,33],[16,36,16,34,"freeze"],[16,42,16,40],[16,43,16,41],[17,4,17,2,"baseHref"],[17,12,17,10],[17,14,17,12],[17,27,17,25],[18,4,18,2,"baseTarget"],[18,14,18,12],[18,16,18,14],[18,23,18,21],[19,4,19,2,"charset"],[19,11,19,9],[19,13,19,11],[19,20,19,18],[20,4,20,2,"title"],[20,9,20,7],[20,11,20,9],[20,13,20,11],[21,4,21,2,"lang"],[21,8,21,6],[21,10,21,8],[21,14,21,12],[22,4,22,2,"dir"],[22,7,22,5],[22,9,22,7],[22,14,22,12],[23,4,23,2,"links"],[23,9,23,7],[23,11,23,9],[23,13,23,11],[24,4,24,2,"meta"],[24,8,24,6],[24,10,24,8],[25,2,25,0],[25,3,25,1],[25,4,25,2],[26,2,27,0],[26,11,27,9,"getDefaultDocumentContext"],[26,36,27,34,"getDefaultDocumentContext"],[26,37,27,34],[26,39,27,37],[27,4,28,2],[27,11,28,9,"Object"],[27,17,28,15],[27,18,28,16,"assign"],[27,24,28,22],[27,25,28,23],[27,26,28,24],[27,27,28,25],[27,29,28,27,"defaultContextBase"],[27,47,28,45],[27,49,28,47],[28,6,29,4,"links"],[28,11,29,9],[28,13,29,11],[28,15,29,13],[29,6,30,4,"meta"],[29,10,30,8],[29,12,30,10],[30,4,31,2],[30,5,31,3],[30,6,31,4],[31,2,32,0],[32,2,34,0],[32,11,34,9,"extractContextFromHead"],[32,33,34,31,"extractContextFromHead"],[32,34,34,32,"head"],[32,38,34,36],[32,40,34,38,"lang"],[32,44,34,42],[32,46,34,44,"dir"],[32,49,34,47],[32,51,34,49],[33,4,35,2],[33,10,35,8,"context"],[33,17,35,15],[33,20,35,18,"getDefaultDocumentContext"],[33,45,35,43],[33,46,35,44],[33,47,35,45],[34,4,37,2],[34,8,37,6,"lang"],[34,12,37,10],[34,14,37,12],[35,6,38,4,"context"],[35,13,38,11],[35,14,38,12,"lang"],[35,18,38,16],[35,21,38,19,"lang"],[35,25,38,23],[36,4,39,2],[37,4,41,2],[37,8,41,6,"dir"],[37,11,41,9],[37,13,41,11],[38,6,42,4,"context"],[38,13,42,11],[38,14,42,12,"dir"],[38,17,42,15],[38,20,42,18],[38,25,42,23],[39,4,43,2],[40,4,45,2],[40,10,45,8,"domNode"],[40,17,45,15],[40,20,45,18,"head"],[40,24,45,22],[40,25,45,23,"domNode"],[40,32,45,30],[41,4,46,2],[41,10,46,8,"children"],[41,18,46,16],[41,21,46,19,"domNode"],[41,28,46,26],[41,29,46,27,"children"],[41,37,46,35],[42,4,47,2,"children"],[42,12,47,10],[42,13,47,11,"filter"],[42,19,47,17],[42,20,47,18,"_domUtils"],[42,29,47,27],[42,30,47,28,"isDomElement"],[42,42,47,40],[42,43,47,41],[42,44,47,42,"forEach"],[42,51,47,49],[42,52,47,50,"child"],[42,57,47,55],[42,61,47,59],[43,6,48,4],[43,10,48,8,"child"],[43,15,48,13],[43,16,48,14,"tagName"],[43,23,48,21],[43,28,48,26],[43,34,48,32],[43,36,48,34],[44,8,49,6],[44,12,49,10,"child"],[44,17,49,15],[44,18,49,16,"attribs"],[44,25,49,23],[44,26,49,24,"name"],[44,30,49,28],[44,32,49,30],[45,10,50,8,"context"],[45,17,50,15],[45,18,50,16,"meta"],[45,22,50,20],[45,23,50,21,"push"],[45,27,50,25],[45,28,50,26,"child"],[45,33,50,31],[45,34,50,32,"attribs"],[45,41,50,39],[45,42,50,40],[46,8,51,6],[46,9,51,7],[46,15,51,13],[46,19,51,17,"child"],[46,24,51,22],[46,25,51,23,"attribs"],[46,32,51,30],[46,33,51,31,"charset"],[46,40,51,38],[46,42,51,40],[47,10,52,8,"context"],[47,17,52,15],[47,18,52,16,"charset"],[47,25,52,23],[47,28,52,26,"child"],[47,33,52,31],[47,34,52,32,"attribs"],[47,41,52,39],[47,42,52,40,"charset"],[47,49,52,47],[47,50,52,48,"toLowerCase"],[47,61,52,59],[47,62,52,60],[47,63,52,61],[48,8,53,6],[49,6,54,4],[49,7,54,5],[49,13,54,11],[49,17,54,15,"child"],[49,22,54,20],[49,23,54,21,"tagName"],[49,30,54,28],[49,35,54,33],[49,41,54,39],[49,43,54,41],[50,8,55,6,"context"],[50,15,55,13],[50,16,55,14,"links"],[50,21,55,19],[50,22,55,20,"push"],[50,26,55,24],[50,27,55,25,"child"],[50,32,55,30],[50,33,55,31,"attribs"],[50,40,55,38],[50,41,55,39],[51,6,56,4],[51,7,56,5],[51,13,56,11],[51,17,56,15,"child"],[51,22,56,20],[51,23,56,21,"tagName"],[51,30,56,28],[51,35,56,33],[51,42,56,40],[51,44,56,42],[52,8,57,6],[52,13,57,11],[52,19,57,17,"titleChild"],[52,29,57,27],[52,33,57,31,"child"],[52,38,57,36],[52,39,57,37,"children"],[52,47,57,45],[52,48,57,46,"filter"],[52,54,57,52],[52,55,57,53,"_domUtils"],[52,64,57,62],[52,65,57,63,"isDomText"],[52,74,57,72],[52,75,57,73],[52,77,57,75],[53,10,58,8,"context"],[53,17,58,15],[53,18,58,16,"title"],[53,23,58,21],[53,26,58,24,"titleChild"],[53,36,58,34],[53,37,58,35,"data"],[53,41,58,39],[53,42,58,40,"trim"],[53,46,58,44],[53,47,58,45],[53,48,58,46],[54,10,59,8],[55,8,60,6],[56,6,61,4],[56,7,61,5],[56,13,61,11],[56,17,61,15,"child"],[56,22,61,20],[56,23,61,21,"tagName"],[56,30,61,28],[56,35,61,33],[56,41,61,39],[56,43,61,41],[57,8,62,6,"context"],[57,15,62,13],[57,16,62,14,"baseHref"],[57,24,62,22],[57,27,62,25,"child"],[57,32,62,30],[57,33,62,31,"attribs"],[57,40,62,38],[57,41,62,39,"href"],[57,45,62,43],[57,49,62,47,"context"],[57,56,62,54],[57,57,62,55,"baseHref"],[57,65,62,63],[58,8,63,6,"context"],[58,15,63,13],[58,16,63,14,"baseTarget"],[58,26,63,24],[58,29,63,27,"child"],[58,34,63,32],[58,35,63,33,"attribs"],[58,42,63,40],[58,43,63,41,"target"],[58,49,63,47],[58,53,63,51,"context"],[58,60,63,58],[58,61,63,59,"baseTarget"],[58,71,63,69],[59,6,64,4],[60,4,65,2],[60,5,65,3],[60,6,65,4],[61,4,66,2],[61,11,66,9,"context"],[61,18,66,16],[62,2,67,0],[63,2,69,0],[63,8,69,6,"htmlModel"],[63,17,69,15],[63,20,69,18,"_HTMLElementModel"],[63,37,69,35],[63,38,69,36,"default"],[63,45,69,43],[63,46,69,44,"fromNativeModel"],[63,61,69,59],[63,62,69,60],[64,4,70,2,"tagName"],[64,11,70,9],[64,13,70,11],[64,19,70,17],[65,4,71,2,"category"],[65,12,71,10],[65,14,71,12],[66,2,72,0],[66,3,72,1],[66,4,72,2],[67,2,74,0],[67,8,74,6,"TDocumentCtor"],[67,21,74,19],[67,24,74,22],[67,33,74,31,"TDocument"],[67,42,74,40,"TDocument"],[67,43,74,41,"init"],[67,47,74,45],[67,49,74,47],[68,4,75,2],[68,8,75,6],[68,9,75,7,"initialize"],[68,19,75,17],[68,20,75,18,"init"],[68,24,75,22],[68,25,75,23],[69,2,76,0],[69,3,76,1],[70,2,78,0,"exports"],[70,9,78,7],[70,10,78,8,"TDocumentCtor"],[70,23,78,21],[70,26,78,24,"TDocumentCtor"],[70,39,78,37],[71,2,79,0,"TDocumentCtor"],[71,15,79,13],[71,16,79,14,"prototype"],[71,25,79,23],[71,28,79,26,"Object"],[71,34,79,32],[71,35,79,33,"create"],[71,41,79,39],[71,42,79,40,"_TBlockCtor"],[71,53,79,51],[71,54,79,52,"default"],[71,61,79,59],[71,62,79,60,"prototype"],[71,71,79,69],[71,72,79,70],[72,2,80,0,"Object"],[72,8,80,6],[72,9,80,7,"defineProperty"],[72,23,80,21],[72,24,80,22,"TDocumentCtor"],[72,37,80,35],[72,38,80,36,"prototype"],[72,47,80,45],[72,49,80,47],[72,58,80,56],[72,60,80,58],[73,4,81,2,"value"],[73,9,81,7],[73,11,81,9],[73,17,81,15],[74,4,82,2,"writable"],[74,12,82,10],[74,14,82,12],[75,2,83,0],[75,3,83,1],[75,4,83,2],[76,2,84,0,"Object"],[76,8,84,6],[76,9,84,7,"defineProperty"],[76,23,84,21],[76,24,84,22,"TDocumentCtor"],[76,37,84,35],[76,38,84,36,"prototype"],[76,47,84,45],[76,49,84,47],[76,55,84,53],[76,57,84,55],[77,4,85,2,"value"],[77,9,85,7],[77,11,85,9],[77,21,85,19],[78,4,86,2,"writable"],[78,12,86,10],[78,14,86,12],[79,2,87,0],[79,3,87,1],[79,4,87,2],[80,2,88,0,"Object"],[80,8,88,6],[80,9,88,7,"defineProperty"],[80,23,88,21],[80,24,88,22,"TDocumentCtor"],[80,37,88,35],[80,38,88,36,"prototype"],[80,47,88,45],[80,49,88,47],[80,62,88,60],[80,64,88,62],[81,4,89,2,"value"],[81,9,89,7],[81,11,89,9],[81,22,89,20],[82,4,90,2,"writable"],[82,12,90,10],[82,14,90,12],[83,2,91,0],[83,3,91,1],[83,4,91,2],[84,2,92,0,"Object"],[84,8,92,6],[84,9,92,7,"defineProperty"],[84,23,92,21],[84,24,92,22,"TDocumentCtor"],[84,37,92,35],[84,38,92,36,"prototype"],[84,47,92,45],[84,49,92,47],[84,63,92,61],[84,65,92,63],[85,4,93,2,"value"],[85,9,93,7],[85,11,93,9,"htmlModel"],[85,20,93,18],[86,4,94,2,"writable"],[86,12,94,10],[86,14,94,12],[87,2,95,0],[87,3,95,1],[87,4,95,2],[88,2,97,0,"TDocumentCtor"],[88,15,97,13],[88,16,97,14,"prototype"],[88,25,97,23],[88,26,97,24,"parseChildren"],[88,39,97,37],[88,42,97,40],[88,51,97,49,"parseChildren"],[88,64,97,62,"parseChildren"],[88,65,97,62],[88,67,97,65],[89,4,98,2],[89,8,98,6,"head"],[89,12,98,10],[90,4,100,2],[90,9,100,7],[90,15,100,13,"child"],[90,20,100,18],[90,24,100,22],[90,28,100,26],[90,29,100,27,"children"],[90,37,100,35],[90,39,100,37],[91,6,101,4],[91,10,101,8,"child"],[91,15,101,13],[91,16,101,14,"tagName"],[91,23,101,21],[91,28,101,26],[91,34,101,32],[91,36,101,34],[92,8,102,6,"head"],[92,12,102,10],[92,15,102,13,"child"],[92,20,102,18],[93,8,103,6],[94,6,104,4],[95,4,105,2],[96,4,107,2],[96,8,107,6],[96,9,107,7,"context"],[96,16,107,14],[96,19,107,17,"Object"],[96,25,107,23],[96,26,107,24,"freeze"],[96,32,107,30],[96,33,107,31,"head"],[96,37,107,35],[96,40,107,38,"extractContextFromHead"],[96,62,107,60],[96,63,107,61,"head"],[96,67,107,65],[96,69,107,67],[96,73,107,71],[96,74,107,72,"attributes"],[96,84,107,82],[96,85,107,83,"lang"],[96,89,107,87],[96,91,107,89],[96,95,107,93],[96,96,107,94,"attributes"],[96,106,107,104],[96,107,107,105,"dir"],[96,110,107,108],[96,111,107,109],[96,114,107,109,"Object"],[96,120,107,109],[96,121,107,109,"assign"],[96,127,107,109],[96,132,107,117,"getDefaultDocumentContext"],[96,157,107,142],[96,158,107,143],[96,159,107,144],[97,6,108,4,"lang"],[97,10,108,8],[97,12,108,10],[97,16,108,14],[97,17,108,15,"attributes"],[97,27,108,25],[97,28,108,26,"lang"],[97,32,108,30],[98,6,109,4,"dir"],[98,9,109,7],[98,11,109,9],[98,15,109,13],[98,16,109,14,"attributes"],[98,26,109,24],[98,27,109,25,"dir"],[99,4,109,28],[99,6,110,3],[99,7,110,4],[100,2,111,0],[100,3,111,1],[101,2,113,0],[101,6,113,4,"_default"],[101,14,113,12],[101,17,113,15,"TDocumentCtor"],[101,30,113,28],[102,2,114,0,"exports"],[102,9,114,7],[102,10,114,8,"default"],[102,17,114,15],[102,20,114,18,"_default"],[102,28,114,26],[103,0,114,27],[103,3]],"functionMap":{"names":["<global>","_interopRequireDefault","getDefaultDocumentContext","extractContextFromHead","children.filter.forEach$argument_0","TDocument","parseChildren"],"mappings":"AAA;ACa,+FD;AEa;CFK;AGE;kDCa;GDkB;CHE;sBKO;CLE;wCMqB;CNc"},"hasCjsExports":true},"type":"js/module"}]}