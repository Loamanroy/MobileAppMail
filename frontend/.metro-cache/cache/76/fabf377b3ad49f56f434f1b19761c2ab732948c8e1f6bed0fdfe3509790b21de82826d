{"dependencies":[{"name":"../tree/TTextCtor","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":17,"index":256},"end":{"line":11,"column":45,"index":284}}],"key":"PLv8wWJ0+6Ie83ttiQUQdoKe8fs=","exportNames":["*"],"imports":1}},{"name":"../tree/TPhrasingCtor","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":13,"column":21,"index":308},"end":{"line":13,"column":53,"index":340}}],"key":"yY4pArrvWJZtJIC3f8cXwhbuM0Q=","exportNames":["*"],"imports":1}},{"name":"../tree/TBlockCtor","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":15,"column":18,"index":361},"end":{"line":15,"column":47,"index":390}}],"key":"/q88JuiyfARFpKpJ0W6qcHsAb9Q=","exportNames":["*"],"imports":1}},{"name":"../tree/TDocumentImpl","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":17,"column":21,"index":414},"end":{"line":17,"column":53,"index":446}}],"key":"k26Sm+FQctmc5ccMvsS2Rm1yE9k=","exportNames":["*"],"imports":1}},{"name":"../dom/dom-utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":19,"column":16,"index":465},"end":{"line":19,"column":43,"index":492}}],"key":"FEqXXeYTRhZzMq31cvYJirY6Y4k=","exportNames":["*"],"imports":1}},{"name":"../tree/TEmptyCtor","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":21,"column":18,"index":513},"end":{"line":21,"column":47,"index":542}}],"key":"q0wybMa4fOgP3Xb3mai/Fu56fXU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.mapNodeList = mapNodeList;\n  exports.bindChildren = bindChildren;\n  exports.translateNode = translateNode;\n  exports.translateDocument = translateDocument;\n  var _TTextCtor = require(_dependencyMap[0], \"../tree/TTextCtor\");\n  var _TPhrasingCtor = require(_dependencyMap[1], \"../tree/TPhrasingCtor\");\n  var _TBlockCtor = require(_dependencyMap[2], \"../tree/TBlockCtor\");\n  var _TDocumentImpl = require(_dependencyMap[3], \"../tree/TDocumentImpl\");\n  var _domUtils = require(_dependencyMap[4], \"../dom/dom-utils\");\n  var _TEmptyCtor = require(_dependencyMap[5], \"../tree/TEmptyCtor\");\n  function mapNodeList({\n    nodeList,\n    parent,\n    parentStyles,\n    params\n  }) {\n    const nextMap = [];\n    for (const i in nodeList) {\n      const child = nodeList[i];\n      const translated = translateNode({\n        node: child,\n        parentStyles,\n        params,\n        nodeIndex: Number(i),\n        parent\n      });\n      if (translated) {\n        nextMap.push(translated);\n      }\n    }\n    return nextMap;\n  }\n  function bindChildren(node, children, params) {\n    if (!node.elementModel || !node.elementModel.isOpaque) {\n      node.bindChildren(mapNodeList({\n        nodeList: children,\n        parent: node,\n        params\n      }));\n    }\n  }\n  function translateElement({\n    node,\n    nodeIndex,\n    params,\n    parent,\n    parentStyles\n  }) {\n    const tagName = node.tagName;\n    const sharedProps = {\n      nodeIndex,\n      parentStyles,\n      context: params,\n      domNode: node,\n      parent\n    };\n    const elementModel = params.modelRegistry.getElementModelFromTagName(tagName);\n    if (!elementModel) {\n      return new _TEmptyCtor.TEmptyCtor({\n        ...sharedProps,\n        isUnregistered: true,\n        elementModel,\n        domNode: node\n      });\n    }\n    if (elementModel.isTranslatableTextual()) {\n      if (node.children.length === 1) {\n        const child = node.children[0];\n        if ((0, _domUtils.isDomText)(child)) {\n          return new _TTextCtor.TTextCtor({\n            ...sharedProps,\n            elementModel,\n            textNode: child,\n            domNode: node\n          });\n        }\n      } else if (node.children.length === 0) {\n        return new _TTextCtor.TTextCtor({\n          ...sharedProps,\n          elementModel,\n          domNode: node,\n          textNode: new _domUtils.Text('')\n        });\n      }\n      const phrasing = new _TPhrasingCtor.TPhrasingCtor({\n        ...sharedProps,\n        domNode: node,\n        elementModel\n      });\n      bindChildren(phrasing, node.children, params);\n      return phrasing;\n    }\n    if (elementModel.isTranslatableBlock()) {\n      const block = new _TBlockCtor.TBlockCtor({\n        ...sharedProps,\n        elementModel,\n        parentStyles,\n        domNode: node\n      });\n      bindChildren(block, node.children, params);\n      return block;\n    }\n    return new _TEmptyCtor.TEmptyCtor({\n      ...sharedProps,\n      isUnregistered: false,\n      elementModel,\n      domNode: node\n    });\n  }\n  function translateNode({\n    node,\n    parentStyles,\n    params,\n    nodeIndex,\n    parent\n  }) {\n    if ((0, _domUtils.isDomText)(node)) {\n      return new _TTextCtor.TTextCtor({\n        textNode: node,\n        context: params,\n        parentStyles,\n        domNode: null,\n        elementModel: null,\n        nodeIndex,\n        parent\n      });\n    }\n    if ((0, _domUtils.isDomElement)(node)) {\n      return translateElement({\n        node,\n        parentStyles,\n        params,\n        nodeIndex,\n        parent\n      });\n    }\n    return null;\n  }\n  function translateDocument(document, params) {\n    const tdoc = new _TDocumentImpl.TDocumentCtor({\n      context: params,\n      styles: params.baseStyles,\n      domNode: document\n    });\n    bindChildren(tdoc, document.children, params);\n    tdoc.parseChildren();\n    return tdoc;\n  }\n});","lineCount":155,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"mapNodeList"],[7,21,6,19],[7,24,6,22,"mapNodeList"],[7,35,6,33],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"bindChildren"],[8,22,7,20],[8,25,7,23,"bindChildren"],[8,37,7,35],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"translateNode"],[9,23,8,21],[9,26,8,24,"translateNode"],[9,39,8,37],[10,2,9,0,"exports"],[10,9,9,7],[10,10,9,8,"translateDocument"],[10,27,9,25],[10,30,9,28,"translateDocument"],[10,47,9,45],[11,2,11,0],[11,6,11,4,"_TTextCtor"],[11,16,11,14],[11,19,11,17,"require"],[11,26,11,24],[11,27,11,24,"_dependencyMap"],[11,41,11,24],[11,65,11,44],[11,66,11,45],[12,2,13,0],[12,6,13,4,"_TPhrasingCtor"],[12,20,13,18],[12,23,13,21,"require"],[12,30,13,28],[12,31,13,28,"_dependencyMap"],[12,45,13,28],[12,73,13,52],[12,74,13,53],[13,2,15,0],[13,6,15,4,"_TBlockCtor"],[13,17,15,15],[13,20,15,18,"require"],[13,27,15,25],[13,28,15,25,"_dependencyMap"],[13,42,15,25],[13,67,15,46],[13,68,15,47],[14,2,17,0],[14,6,17,4,"_TDocumentImpl"],[14,20,17,18],[14,23,17,21,"require"],[14,30,17,28],[14,31,17,28,"_dependencyMap"],[14,45,17,28],[14,73,17,52],[14,74,17,53],[15,2,19,0],[15,6,19,4,"_domUtils"],[15,15,19,13],[15,18,19,16,"require"],[15,25,19,23],[15,26,19,23,"_dependencyMap"],[15,40,19,23],[15,63,19,42],[15,64,19,43],[16,2,21,0],[16,6,21,4,"_TEmptyCtor"],[16,17,21,15],[16,20,21,18,"require"],[16,27,21,25],[16,28,21,25,"_dependencyMap"],[16,42,21,25],[16,67,21,46],[16,68,21,47],[17,2,23,0],[17,11,23,9,"mapNodeList"],[17,22,23,20,"mapNodeList"],[17,23,23,21],[18,4,24,2,"nodeList"],[18,12,24,10],[19,4,25,2,"parent"],[19,10,25,8],[20,4,26,2,"parentStyles"],[20,16,26,14],[21,4,27,2,"params"],[22,2,28,0],[22,3,28,1],[22,5,28,3],[23,4,29,2],[23,10,29,8,"nextMap"],[23,17,29,15],[23,20,29,18],[23,22,29,20],[24,4,31,2],[24,9,31,7],[24,15,31,13,"i"],[24,16,31,14],[24,20,31,18,"nodeList"],[24,28,31,26],[24,30,31,28],[25,6,32,4],[25,12,32,10,"child"],[25,17,32,15],[25,20,32,18,"nodeList"],[25,28,32,26],[25,29,32,27,"i"],[25,30,32,28],[25,31,32,29],[26,6,33,4],[26,12,33,10,"translated"],[26,22,33,20],[26,25,33,23,"translateNode"],[26,38,33,36],[26,39,33,37],[27,8,34,6,"node"],[27,12,34,10],[27,14,34,12,"child"],[27,19,34,17],[28,8,35,6,"parentStyles"],[28,20,35,18],[29,8,36,6,"params"],[29,14,36,12],[30,8,37,6,"nodeIndex"],[30,17,37,15],[30,19,37,17,"Number"],[30,25,37,23],[30,26,37,24,"i"],[30,27,37,25],[30,28,37,26],[31,8,38,6,"parent"],[32,6,39,4],[32,7,39,5],[32,8,39,6],[33,6,41,4],[33,10,41,8,"translated"],[33,20,41,18],[33,22,41,20],[34,8,42,6,"nextMap"],[34,15,42,13],[34,16,42,14,"push"],[34,20,42,18],[34,21,42,19,"translated"],[34,31,42,29],[34,32,42,30],[35,6,43,4],[36,4,44,2],[37,4,46,2],[37,11,46,9,"nextMap"],[37,18,46,16],[38,2,47,0],[39,2,49,0],[39,11,49,9,"bindChildren"],[39,23,49,21,"bindChildren"],[39,24,49,22,"node"],[39,28,49,26],[39,30,49,28,"children"],[39,38,49,36],[39,40,49,38,"params"],[39,46,49,44],[39,48,49,46],[40,4,50,2],[40,8,50,6],[40,9,50,7,"node"],[40,13,50,11],[40,14,50,12,"elementModel"],[40,26,50,24],[40,30,50,28],[40,31,50,29,"node"],[40,35,50,33],[40,36,50,34,"elementModel"],[40,48,50,46],[40,49,50,47,"isOpaque"],[40,57,50,55],[40,59,50,57],[41,6,51,4,"node"],[41,10,51,8],[41,11,51,9,"bindChildren"],[41,23,51,21],[41,24,51,22,"mapNodeList"],[41,35,51,33],[41,36,51,34],[42,8,52,6,"nodeList"],[42,16,52,14],[42,18,52,16,"children"],[42,26,52,24],[43,8,53,6,"parent"],[43,14,53,12],[43,16,53,14,"node"],[43,20,53,18],[44,8,54,6,"params"],[45,6,55,4],[45,7,55,5],[45,8,55,6],[45,9,55,7],[46,4,56,2],[47,2,57,0],[48,2,59,0],[48,11,59,9,"translateElement"],[48,27,59,25,"translateElement"],[48,28,59,26],[49,4,60,2,"node"],[49,8,60,6],[50,4,61,2,"nodeIndex"],[50,13,61,11],[51,4,62,2,"params"],[51,10,62,8],[52,4,63,2,"parent"],[52,10,63,8],[53,4,64,2,"parentStyles"],[54,2,65,0],[54,3,65,1],[54,5,65,3],[55,4,66,2],[55,10,66,8,"tagName"],[55,17,66,15],[55,20,66,18,"node"],[55,24,66,22],[55,25,66,23,"tagName"],[55,32,66,30],[56,4,67,2],[56,10,67,8,"sharedProps"],[56,21,67,19],[56,24,67,22],[57,6,68,4,"nodeIndex"],[57,15,68,13],[58,6,69,4,"parentStyles"],[58,18,69,16],[59,6,70,4,"context"],[59,13,70,11],[59,15,70,13,"params"],[59,21,70,19],[60,6,71,4,"domNode"],[60,13,71,11],[60,15,71,13,"node"],[60,19,71,17],[61,6,72,4,"parent"],[62,4,73,2],[62,5,73,3],[63,4,74,2],[63,10,74,8,"elementModel"],[63,22,74,20],[63,25,74,23,"params"],[63,31,74,29],[63,32,74,30,"modelRegistry"],[63,45,74,43],[63,46,74,44,"getElementModelFromTagName"],[63,72,74,70],[63,73,74,71,"tagName"],[63,80,74,78],[63,81,74,79],[64,4,76,2],[64,8,76,6],[64,9,76,7,"elementModel"],[64,21,76,19],[64,23,76,21],[65,6,77,4],[65,13,77,11],[65,17,77,15,"_TEmptyCtor"],[65,28,77,26],[65,29,77,27,"TEmptyCtor"],[65,39,77,37],[65,40,77,38],[66,8,77,40],[66,11,77,43,"sharedProps"],[66,22,77,54],[67,8,78,6,"isUnregistered"],[67,22,78,20],[67,24,78,22],[67,28,78,26],[68,8,79,6,"elementModel"],[68,20,79,18],[69,8,80,6,"domNode"],[69,15,80,13],[69,17,80,15,"node"],[70,6,81,4],[70,7,81,5],[70,8,81,6],[71,4,82,2],[72,4,84,2],[72,8,84,6,"elementModel"],[72,20,84,18],[72,21,84,19,"isTranslatableTextual"],[72,42,84,40],[72,43,84,41],[72,44,84,42],[72,46,84,44],[73,6,85,4],[73,10,85,8,"node"],[73,14,85,12],[73,15,85,13,"children"],[73,23,85,21],[73,24,85,22,"length"],[73,30,85,28],[73,35,85,33],[73,36,85,34],[73,38,85,36],[74,8,86,6],[74,14,86,12,"child"],[74,19,86,17],[74,22,86,20,"node"],[74,26,86,24],[74,27,86,25,"children"],[74,35,86,33],[74,36,86,34],[74,37,86,35],[74,38,86,36],[75,8,88,6],[75,12,88,10],[75,13,88,11],[75,14,88,12],[75,16,88,14,"_domUtils"],[75,25,88,23],[75,26,88,24,"isDomText"],[75,35,88,33],[75,37,88,35,"child"],[75,42,88,40],[75,43,88,41],[75,45,88,43],[76,10,89,8],[76,17,89,15],[76,21,89,19,"_TTextCtor"],[76,31,89,29],[76,32,89,30,"TTextCtor"],[76,41,89,39],[76,42,89,40],[77,12,89,42],[77,15,89,45,"sharedProps"],[77,26,89,56],[78,12,90,10,"elementModel"],[78,24,90,22],[79,12,91,10,"textNode"],[79,20,91,18],[79,22,91,20,"child"],[79,27,91,25],[80,12,92,10,"domNode"],[80,19,92,17],[80,21,92,19,"node"],[81,10,93,8],[81,11,93,9],[81,12,93,10],[82,8,94,6],[83,6,95,4],[83,7,95,5],[83,13,95,11],[83,17,95,15,"node"],[83,21,95,19],[83,22,95,20,"children"],[83,30,95,28],[83,31,95,29,"length"],[83,37,95,35],[83,42,95,40],[83,43,95,41],[83,45,95,43],[84,8,96,6],[84,15,96,13],[84,19,96,17,"_TTextCtor"],[84,29,96,27],[84,30,96,28,"TTextCtor"],[84,39,96,37],[84,40,96,38],[85,10,96,40],[85,13,96,43,"sharedProps"],[85,24,96,54],[86,10,97,8,"elementModel"],[86,22,97,20],[87,10,98,8,"domNode"],[87,17,98,15],[87,19,98,17,"node"],[87,23,98,21],[88,10,99,8,"textNode"],[88,18,99,16],[88,20,99,18],[88,24,99,22,"_domUtils"],[88,33,99,31],[88,34,99,32,"Text"],[88,38,99,36],[88,39,99,37],[88,41,99,39],[89,8,100,6],[89,9,100,7],[89,10,100,8],[90,6,101,4],[91,6,103,4],[91,12,103,10,"phrasing"],[91,20,103,18],[91,23,103,21],[91,27,103,25,"_TPhrasingCtor"],[91,41,103,39],[91,42,103,40,"TPhrasingCtor"],[91,55,103,53],[91,56,103,54],[92,8,103,56],[92,11,103,59,"sharedProps"],[92,22,103,70],[93,8,104,6,"domNode"],[93,15,104,13],[93,17,104,15,"node"],[93,21,104,19],[94,8,105,6,"elementModel"],[95,6,106,4],[95,7,106,5],[95,8,106,6],[96,6,107,4,"bindChildren"],[96,18,107,16],[96,19,107,17,"phrasing"],[96,27,107,25],[96,29,107,27,"node"],[96,33,107,31],[96,34,107,32,"children"],[96,42,107,40],[96,44,107,42,"params"],[96,50,107,48],[96,51,107,49],[97,6,108,4],[97,13,108,11,"phrasing"],[97,21,108,19],[98,4,109,2],[99,4,111,2],[99,8,111,6,"elementModel"],[99,20,111,18],[99,21,111,19,"isTranslatableBlock"],[99,40,111,38],[99,41,111,39],[99,42,111,40],[99,44,111,42],[100,6,112,4],[100,12,112,10,"block"],[100,17,112,15],[100,20,112,18],[100,24,112,22,"_TBlockCtor"],[100,35,112,33],[100,36,112,34,"TBlockCtor"],[100,46,112,44],[100,47,112,45],[101,8,112,47],[101,11,112,50,"sharedProps"],[101,22,112,61],[102,8,113,6,"elementModel"],[102,20,113,18],[103,8,114,6,"parentStyles"],[103,20,114,18],[104,8,115,6,"domNode"],[104,15,115,13],[104,17,115,15,"node"],[105,6,116,4],[105,7,116,5],[105,8,116,6],[106,6,117,4,"bindChildren"],[106,18,117,16],[106,19,117,17,"block"],[106,24,117,22],[106,26,117,24,"node"],[106,30,117,28],[106,31,117,29,"children"],[106,39,117,37],[106,41,117,39,"params"],[106,47,117,45],[106,48,117,46],[107,6,118,4],[107,13,118,11,"block"],[107,18,118,16],[108,4,119,2],[109,4,121,2],[109,11,121,9],[109,15,121,13,"_TEmptyCtor"],[109,26,121,24],[109,27,121,25,"TEmptyCtor"],[109,37,121,35],[109,38,121,36],[110,6,121,38],[110,9,121,41,"sharedProps"],[110,20,121,52],[111,6,122,4,"isUnregistered"],[111,20,122,18],[111,22,122,20],[111,27,122,25],[112,6,123,4,"elementModel"],[112,18,123,16],[113,6,124,4,"domNode"],[113,13,124,11],[113,15,124,13,"node"],[114,4,125,2],[114,5,125,3],[114,6,125,4],[115,2,126,0],[116,2,128,0],[116,11,128,9,"translateNode"],[116,24,128,22,"translateNode"],[116,25,128,23],[117,4,129,2,"node"],[117,8,129,6],[118,4,130,2,"parentStyles"],[118,16,130,14],[119,4,131,2,"params"],[119,10,131,8],[120,4,132,2,"nodeIndex"],[120,13,132,11],[121,4,133,2,"parent"],[122,2,134,0],[122,3,134,1],[122,5,134,3],[123,4,135,2],[123,8,135,6],[123,9,135,7],[123,10,135,8],[123,12,135,10,"_domUtils"],[123,21,135,19],[123,22,135,20,"isDomText"],[123,31,135,29],[123,33,135,31,"node"],[123,37,135,35],[123,38,135,36],[123,40,135,38],[124,6,136,4],[124,13,136,11],[124,17,136,15,"_TTextCtor"],[124,27,136,25],[124,28,136,26,"TTextCtor"],[124,37,136,35],[124,38,136,36],[125,8,137,6,"textNode"],[125,16,137,14],[125,18,137,16,"node"],[125,22,137,20],[126,8,138,6,"context"],[126,15,138,13],[126,17,138,15,"params"],[126,23,138,21],[127,8,139,6,"parentStyles"],[127,20,139,18],[128,8,140,6,"domNode"],[128,15,140,13],[128,17,140,15],[128,21,140,19],[129,8,141,6,"elementModel"],[129,20,141,18],[129,22,141,20],[129,26,141,24],[130,8,142,6,"nodeIndex"],[130,17,142,15],[131,8,143,6,"parent"],[132,6,144,4],[132,7,144,5],[132,8,144,6],[133,4,145,2],[134,4,147,2],[134,8,147,6],[134,9,147,7],[134,10,147,8],[134,12,147,10,"_domUtils"],[134,21,147,19],[134,22,147,20,"isDomElement"],[134,34,147,32],[134,36,147,34,"node"],[134,40,147,38],[134,41,147,39],[134,43,147,41],[135,6,148,4],[135,13,148,11,"translateElement"],[135,29,148,27],[135,30,148,28],[136,8,149,6,"node"],[136,12,149,10],[137,8,150,6,"parentStyles"],[137,20,150,18],[138,8,151,6,"params"],[138,14,151,12],[139,8,152,6,"nodeIndex"],[139,17,152,15],[140,8,153,6,"parent"],[141,6,154,4],[141,7,154,5],[141,8,154,6],[142,4,155,2],[143,4,157,2],[143,11,157,9],[143,15,157,13],[144,2,158,0],[145,2,160,0],[145,11,160,9,"translateDocument"],[145,28,160,26,"translateDocument"],[145,29,160,27,"document"],[145,37,160,35],[145,39,160,37,"params"],[145,45,160,43],[145,47,160,45],[146,4,161,2],[146,10,161,8,"tdoc"],[146,14,161,12],[146,17,161,15],[146,21,161,19,"_TDocumentImpl"],[146,35,161,33],[146,36,161,34,"TDocumentCtor"],[146,49,161,47],[146,50,161,48],[147,6,162,4,"context"],[147,13,162,11],[147,15,162,13,"params"],[147,21,162,19],[148,6,163,4,"styles"],[148,12,163,10],[148,14,163,12,"params"],[148,20,163,18],[148,21,163,19,"baseStyles"],[148,31,163,29],[149,6,164,4,"domNode"],[149,13,164,11],[149,15,164,13,"document"],[150,4,165,2],[150,5,165,3],[150,6,165,4],[151,4,166,2,"bindChildren"],[151,16,166,14],[151,17,166,15,"tdoc"],[151,21,166,19],[151,23,166,21,"document"],[151,31,166,29],[151,32,166,30,"children"],[151,40,166,38],[151,42,166,40,"params"],[151,48,166,46],[151,49,166,47],[152,4,167,2,"tdoc"],[152,8,167,6],[152,9,167,7,"parseChildren"],[152,22,167,20],[152,23,167,21],[152,24,167,22],[153,4,168,2],[153,11,168,9,"tdoc"],[153,15,168,13],[154,2,169,0],[155,0,169,1],[155,3]],"functionMap":{"names":["<global>","mapNodeList","bindChildren","translateElement","translateNode","translateDocument"],"mappings":"AAA;ACsB;CDwB;AEE;CFQ;AGE;CHmE;AIE;CJ8B;AKE;CLS"},"hasCjsExports":true},"type":"js/module"}]}